!function e(t,o,s){function i(r,l){if(!o[r]){if(!t[r]){var h="function"==typeof require&&require;if(!l&&h)return h(r,!0);if(n)return n(r,!0);var a=new Error("Cannot find module '"+r+"'");throw a.code="MODULE_NOT_FOUND",a}var c=o[r]={exports:{}};t[r][0].call(c.exports,(function(e){return i(t[r][1][e]||e)}),c,c.exports,e,t,o,s)}return o[r].exports}for(var n="function"==typeof require&&require,r=0;r<s.length;r++)i(s[r]);return i}({1:[function(e,t,o){const{Parser:s,PROTOCOL_6:i,PROTOCOL_7:n}=e("./protocol");o.Connector=class{constructor(e,t,o,i){this.options=e,this.WebSocket=t,this.Timer=o,this.handlers=i;const n=this.options.path?""+this.options.path:"livereload";this._uri=`ws${this.options.https?"s":""}://${this.options.host}:${this.options.port}/${n}`,this._nextDelay=this.options.mindelay,this._connectionDesired=!1,this.protocol=0,this.protocolParser=new s({connected:e=>(this.protocol=e,this._handshakeTimeout.stop(),this._nextDelay=this.options.mindelay,this._disconnectionReason="broken",this.handlers.connected(this.protocol)),error:e=>(this.handlers.error(e),this._closeOnError()),message:e=>this.handlers.message(e)}),this._handshakeTimeout=new this.Timer(()=>{if(this._isSocketConnected())return this._disconnectionReason="handshake-timeout",this.socket.close()}),this._reconnectTimer=new this.Timer(()=>{if(this._connectionDesired)return this.connect()}),this.connect()}_isSocketConnected(){return this.socket&&this.socket.readyState===this.WebSocket.OPEN}connect(){this._connectionDesired=!0,this._isSocketConnected()||(this._reconnectTimer.stop(),this._disconnectionReason="cannot-connect",this.protocolParser.reset(),this.handlers.connecting(),this.socket=new this.WebSocket(this._uri),this.socket.onopen=e=>this._onopen(e),this.socket.onclose=e=>this._onclose(e),this.socket.onmessage=e=>this._onmessage(e),this.socket.onerror=e=>this._onerror(e))}disconnect(){if(this._connectionDesired=!1,this._reconnectTimer.stop(),this._isSocketConnected())return this._disconnectionReason="manual",this.socket.close()}_scheduleReconnection(){this._connectionDesired&&(this._reconnectTimer.running||(this._reconnectTimer.start(this._nextDelay),this._nextDelay=Math.min(this.options.maxdelay,2*this._nextDelay)))}sendCommand(e){if(this.protocol)return this._sendCommand(e)}_sendCommand(e){return this.socket.send(JSON.stringify(e))}_closeOnError(){return this._handshakeTimeout.stop(),this._disconnectionReason="error",this.socket.close()}_onopen(e){this.handlers.socketConnected(),this._disconnectionReason="handshake-failed";const t={command:"hello",protocols:[i,n],ver:"3.3.1"};return this.options.ext&&(t.ext=this.options.ext),this.options.extver&&(t.extver=this.options.extver),this.options.snipver&&(t.snipver=this.options.snipver),this._sendCommand(t),this._handshakeTimeout.start(this.options.handshake_timeout)}_onclose(e){return this.protocol=0,this.handlers.disconnected(this._disconnectionReason,this._nextDelay),this._scheduleReconnection()}_onerror(e){}_onmessage(e){return this.protocolParser.process(e.data)}}},{"./protocol":6}],2:[function(e,t,o){const s={bind(e,t,o){if(e.addEventListener)return e.addEventListener(t,o,!1);if(e.attachEvent)return e[t]=1,e.attachEvent("onpropertychange",(function(e){if(e.propertyName===t)return o()}));throw new Error(`Attempt to attach custom event ${t} to something which isn't a DOMElement`)},fire(e,t){if(e.addEventListener){const e=document.createEvent("HTMLEvents");return e.initEvent(t,!0,!0),document.dispatchEvent(e)}if(!e.attachEvent)throw new Error(`Attempt to fire custom event ${t} on something which isn't a DOMElement`);if(e[t])return e[t]++}};o.bind=s.bind,o.fire=s.fire},{}],3:[function(e,t,o){class s{constructor(e,t){this.window=e,this.host=t}reload(e,t){if(this.window.less&&this.window.less.refresh){if(e.match(/\.less$/i))return this.reloadLess(e);if(t.originalPath.match(/\.less$/i))return this.reloadLess(t.originalPath)}return!1}reloadLess(e){let t;const o=(()=>{const e=[];for(t of Array.from(document.getElementsByTagName("link")))(t.href&&t.rel.match(/^stylesheet\/less$/i)||t.rel.match(/stylesheet/i)&&t.type.match(/^text\/(x-)?less$/i))&&e.push(t);return e})();if(0===o.length)return!1;for(t of Array.from(o))t.href=this.host.generateCacheBustUrl(t.href);return this.host.console.log("LiveReload is asking LESS to recompile all stylesheets"),this.window.less.refresh(!0),!0}analyze(){return{disable:!(!this.window.less||!this.window.less.refresh)}}}s.identifier="less",s.version="1.0",t.exports=s},{}],4:[function(e,t,o){const{Connector:s}=e("./connector"),{Timer:i}=e("./timer"),{Options:n}=e("./options"),{Reloader:r}=e("./reloader"),{ProtocolError:l}=e("./protocol");o.LiveReload=class{constructor(e){if(this.window=e,this.listeners={},this.plugins=[],this.pluginIdentifiers={},this.console=this.window.console&&this.window.console.log&&this.window.console.error?this.window.location.href.match(/LR-verbose/)?this.window.console:{log(){},error:this.window.console.error.bind(this.window.console)}:{log(){},error(){}},this.WebSocket=this.window.WebSocket||this.window.MozWebSocket){if("LiveReloadOptions"in e){this.options=new n;for(const t of Object.keys(e.LiveReloadOptions||{})){const o=e.LiveReloadOptions[t];this.options.set(t,o)}}else if(this.options=n.extract(this.window.document),!this.options)return void this.console.error("LiveReload disabled because it could not find its own <SCRIPT> tag");this.reloader=new r(this.window,this.console,i),this.connector=new s(this.options,this.WebSocket,i,{connecting:()=>{},socketConnected:()=>{},connected:e=>("function"==typeof this.listeners.connect&&this.listeners.connect(),this.log(`LiveReload is connected to ${this.options.host}:${this.options.port} (protocol v${e}).`),this.analyze()),error:e=>{if(e instanceof l){if("undefined"!=typeof console&&null!==console)return console.log(e.message+".")}else if("undefined"!=typeof console&&null!==console)return console.log("LiveReload internal error: "+e.message)},disconnected:(e,t)=>{switch("function"==typeof this.listeners.disconnect&&this.listeners.disconnect(),e){case"cannot-connect":return this.log(`LiveReload cannot connect to ${this.options.host}:${this.options.port}, will retry in ${t} sec.`);case"broken":return this.log(`LiveReload disconnected from ${this.options.host}:${this.options.port}, reconnecting in ${t} sec.`);case"handshake-timeout":return this.log(`LiveReload cannot connect to ${this.options.host}:${this.options.port} (handshake timeout), will retry in ${t} sec.`);case"handshake-failed":return this.log(`LiveReload cannot connect to ${this.options.host}:${this.options.port} (handshake failed), will retry in ${t} sec.`);case"manual":case"error":default:return this.log(`LiveReload disconnected from ${this.options.host}:${this.options.port} (${e}), reconnecting in ${t} sec.`)}},message:e=>{switch(e.command){case"reload":return this.performReload(e);case"alert":return this.performAlert(e)}}}),this.initialized=!0}else this.console.error("LiveReload disabled because the browser does not seem to support web sockets")}on(e,t){this.listeners[e]=t}log(e){return this.console.log(""+e)}performReload(e){return this.log("LiveReload received reload request: "+JSON.stringify(e,null,2)),this.reloader.reload(e.path,{liveCSS:null==e.liveCSS||e.liveCSS,liveImg:null==e.liveImg||e.liveImg,reloadMissingCSS:null==e.reloadMissingCSS||e.reloadMissingCSS,originalPath:e.originalPath||"",overrideURL:e.overrideURL||"",serverURL:`http://${this.options.host}:${this.options.port}`,pluginOrder:this.options.pluginOrder})}performAlert(e){return alert(e.message)}shutDown(){if(this.initialized)return this.connector.disconnect(),this.log("LiveReload disconnected."),"function"==typeof this.listeners.shutdown?this.listeners.shutdown():void 0}hasPlugin(e){return!!this.pluginIdentifiers[e]}addPlugin(e){if(!this.initialized)return;if(this.hasPlugin(e.identifier))return;this.pluginIdentifiers[e.identifier]=!0;const t=new e(this.window,{_livereload:this,_reloader:this.reloader,_connector:this.connector,console:this.console,Timer:i,generateCacheBustUrl:e=>this.reloader.generateCacheBustUrl(e)});this.plugins.push(t),this.reloader.addPlugin(t)}analyze(){if(!this.initialized)return;if(!(this.connector.protocol>=7))return;const e={};for(const o of this.plugins){var t=("function"==typeof o.analyze?o.analyze():void 0)||{};e[o.constructor.identifier]=t,t.version=o.constructor.version}this.connector.sendCommand({command:"info",plugins:e,url:this.window.location.href})}}},{"./connector":1,"./options":5,"./protocol":6,"./reloader":7,"./timer":9}],5:[function(e,t,o){class s{constructor(){this.https=!1,this.host=null,this.port=35729,this.snipver=null,this.ext=null,this.extver=null,this.mindelay=1e3,this.maxdelay=6e4,this.handshake_timeout=5e3;var e=[];Object.defineProperty(this,"pluginOrder",{get:()=>e,set(t){e.push.apply(e,t.split(/[,;]/))}})}set(e,t){void 0!==t&&(isNaN(+t)||(t=+t),this[e]=t)}}s.extract=function(e){for(const l of Array.from(e.getElementsByTagName("script"))){var t,o,i=l.src,n=l.getAttribute("src");if((t=i.match(/^([^:]+:\/\/([^/:]+)(?::(\d+))?\/|\/\/|\/)?([^/].*\/)?z?livereload\.js(?:\?(.*))?$/))&&(o=n.match(/^(?:(?:([^:/]+)?:?)\/{0,2})([^:]+)(?::(\d+))?/))){const[,,e,i,,n]=t,[,,,h]=o,a=new s;if(a.https=0===l.src.indexOf("https"),a.host=e,a.port=i?parseInt(i,10):h?parseInt(h,10):a.port,n)for(const e of n.split("&")){var r;(r=e.split("=")).length>1&&a.set(r[0].replace(/-/g,"_"),r.slice(1).join("="))}return a}}return null},o.Options=s},{}],6:[function(e,t,o){let s,i;o.PROTOCOL_6=s="http://livereload.com/protocols/official-6",o.PROTOCOL_7=i="http://livereload.com/protocols/official-7";class n{constructor(e,t){this.message=`LiveReload protocol error (${e}) after receiving data: "${t}".`}}o.ProtocolError=n,o.Parser=class{constructor(e){this.handlers=e,this.reset()}reset(){this.protocol=null}process(e){try{let t;if(!this.protocol){if(e.match(new RegExp("^!!ver:([\\d.]+)$")))this.protocol=6;else if(t=this._parseMessage(e,["hello"])){if(!t.protocols.length)throw new n("no protocols specified in handshake message");if(Array.from(t.protocols).includes("http://livereload.com/protocols/official-7"))this.protocol=7;else{if(!Array.from(t.protocols).includes("http://livereload.com/protocols/official-6"))throw new n("no supported protocols found");this.protocol=6}}return this.handlers.connected(this.protocol)}if(6===this.protocol){if(t=JSON.parse(e),!t.length)throw new n("protocol 6 messages must be arrays");const[o,s]=Array.from(t);if("refresh"!==o)throw new n("unknown protocol 6 command");return this.handlers.message({command:"reload",path:s.path,liveCSS:null==s.apply_css_live||s.apply_css_live})}return t=this._parseMessage(e,["reload","alert"]),this.handlers.message(t)}catch(e){if(e instanceof n)return this.handlers.error(e);throw e}}_parseMessage(e,t){let o;try{o=JSON.parse(e)}catch(t){throw new n("unparsable JSON",e)}if(!o.command)throw new n('missing "command" key',e);if(!t.includes(o.command))throw new n(`invalid command '${o.command}', only valid commands are: ${t.join(", ")})`,e);return o}}},{}],7:[function(e,t,o){function s(e){let t="",o="",s=e.indexOf("#");s>=0&&(t=e.slice(s),e=e.slice(0,s));const i=e.indexOf("??");return i>=0?i+1!==e.lastIndexOf("?")&&(s=e.lastIndexOf("?")):s=e.indexOf("?"),s>=0&&(o=e.slice(s),e=e.slice(0,s)),{url:e,params:o,hash:t}}function i(e){if(!e)return"";let t;return({url:e}=s(e)),t=0===e.indexOf("file://")?e.replace(new RegExp("^file://(localhost)?"),""):e.replace(new RegExp("^([^:]+:)?//([^:/]+)(:\\d*)?/"),"/"),decodeURIComponent(t)}function n(e,t){if((e=e.replace(/^\/+/,"").toLowerCase())===(t=t.replace(/^\/+/,"").toLowerCase()))return 1e4;const o=e.split(/\/|\\/).reverse(),s=t.split(/\/|\\/).reverse(),i=Math.min(o.length,s.length);let n=0;for(;n<i&&o[n]===s[n];)++n;return n}function r(e,t,o=(e=>e)){let s,i={score:0};for(const r of t)s=n(e,o(r)),s>i.score&&(i={object:r,score:s});return 0===i.score?null:i}function l(e,t){return n(e,t)>0}const h=[{selector:"background",styleNames:["backgroundImage"]},{selector:"border",styleNames:["borderImage","webkitBorderImage","MozBorderImage"]}],a={stylesheetReloadTimeout:15e3};o.splitUrl=s,o.pathFromUrl=i,o.numberOfMatchingSegments=n,o.pickBestMatch=r,o.pathsMatch=l,o.Reloader=class{constructor(e,t,o){this.window=e,this.console=t,this.Timer=o,this.document=this.window.document,this.importCacheWaitPeriod=200,this.plugins=[]}addPlugin(e){return this.plugins.push(e)}analyze(e){}reload(e,t={}){if(this.options={...a,...t},this.options.pluginOrder&&this.options.pluginOrder.length)this.runPluginsByOrder(e,t);else{for(const o of Array.from(this.plugins))if(o.reload&&o.reload(e,t))return;if(!(t.liveCSS&&e.match(/\.css(?:\.map)?$/i)&&this.reloadStylesheet(e)))if(t.liveImg&&e.match(/\.(jpe?g|png|gif)$/i))this.reloadImages(e);else{if(!t.isChromeExtension)return this.reloadPage();this.reloadChromeExtension()}}}runPluginsByOrder(e,t){t.pluginOrder.some(o=>!!("css"===o&&t.liveCSS&&e.match(/\.css(?:\.map)?$/i)&&this.reloadStylesheet(e))||("img"===o&&t.liveImg&&e.match(/\.(jpe?g|png|gif)$/i)?(this.reloadImages(e),!0):"extension"===o&&t.isChromeExtension?(this.reloadChromeExtension(),!0):"others"===o?(this.reloadPage(),!0):"external"===o?this.plugins.some(o=>{if(o.reload&&o.reload(e,t))return!0}):this.plugins.filter(e=>e.constructor.identifier===o).some(o=>{if(o.reload&&o.reload(e,t))return!0})))}reloadPage(){return this.window.document.location.reload()}reloadChromeExtension(){return this.window.chrome.runtime.reload()}reloadImages(e){let t;const o=this.generateUniqueString();for(t of Array.from(this.document.images))l(e,i(t.src))&&(t.src=this.generateCacheBustUrl(t.src,o));if(this.document.querySelectorAll)for(const{selector:s,styleNames:i}of h)for(t of Array.from(this.document.querySelectorAll(`[style*=${s}]`)))this.reloadStyleImages(t.style,i,e,o);if(this.document.styleSheets)return Array.from(this.document.styleSheets).map(t=>this.reloadStylesheetImages(t,e,o))}reloadStylesheetImages(e,t,o){let s;try{s=(e||{}).cssRules}catch(e){}if(s)for(const e of Array.from(s))switch(e.type){case CSSRule.IMPORT_RULE:this.reloadStylesheetImages(e.styleSheet,t,o);break;case CSSRule.STYLE_RULE:for(const{styleNames:s}of h)this.reloadStyleImages(e.style,s,t,o);break;case CSSRule.MEDIA_RULE:this.reloadStylesheetImages(e,t,o)}}reloadStyleImages(e,t,o,s){for(const n of t){const t=e[n];if("string"==typeof t){const r=t.replace(new RegExp("\\burl\\s*\\(([^)]*)\\)"),(e,t)=>l(o,i(t))?`url(${this.generateCacheBustUrl(t,s)})`:e);r!==t&&(e[n]=r)}}}reloadStylesheet(e){const t=this.options||a;let o,s;const n=(()=>{const e=[];for(s of Array.from(this.document.getElementsByTagName("link")))s.rel.match(/^stylesheet$/i)&&!s.__LiveReload_pendingRemoval&&e.push(s);return e})(),l=[];for(o of Array.from(this.document.getElementsByTagName("style")))o.sheet&&this.collectImportedStylesheets(o,o.sheet,l);for(s of Array.from(n))this.collectImportedStylesheets(s,s.sheet,l);if(this.window.StyleFix&&this.document.querySelectorAll)for(o of Array.from(this.document.querySelectorAll("style[data-href]")))n.push(o);this.console.log(`LiveReload found ${n.length} LINKed stylesheets, ${l.length} @imported stylesheets`);const h=r(e,n.concat(l),e=>i(this.linkHref(e)));if(h)h.object.rule?(this.console.log("LiveReload is reloading imported stylesheet: "+h.object.href),this.reattachImportedRule(h.object)):(this.console.log("LiveReload is reloading stylesheet: "+this.linkHref(h.object)),this.reattachStylesheetLink(h.object));else if(t.reloadMissingCSS)for(s of(this.console.log(`LiveReload will reload all stylesheets because path '${e}' did not match any specific one. To disable this behavior, set 'options.reloadMissingCSS' to 'false'.`),Array.from(n)))this.reattachStylesheetLink(s);else this.console.log(`LiveReload will not reload path '${e}' because the stylesheet was not found on the page and 'options.reloadMissingCSS' was set to 'false'.`);return!0}collectImportedStylesheets(e,t,o){let s;try{s=(t||{}).cssRules}catch(e){}if(s&&s.length)for(let t=0;t<s.length;t++){const i=s[t];switch(i.type){case CSSRule.CHARSET_RULE:continue;case CSSRule.IMPORT_RULE:o.push({link:e,rule:i,index:t,href:i.href}),this.collectImportedStylesheets(e,i.styleSheet,o)}}}waitUntilCssLoads(e,t){const o=this.options||a;let s=!1;const i=()=>{if(!s)return s=!0,t()};if(e.onload=()=>(this.console.log("LiveReload: the new stylesheet has finished loading"),this.knownToSupportCssOnLoad=!0,i()),!this.knownToSupportCssOnLoad){let t;(t=()=>e.sheet?(this.console.log("LiveReload is polling until the new CSS finishes loading..."),i()):this.Timer.start(50,t))()}return this.Timer.start(o.stylesheetReloadTimeout,i)}linkHref(e){return e.href||e.getAttribute&&e.getAttribute("data-href")}reattachStylesheetLink(e){let t;if(e.__LiveReload_pendingRemoval)return;e.__LiveReload_pendingRemoval=!0,"STYLE"===e.tagName?(t=this.document.createElement("link"),t.rel="stylesheet",t.media=e.media,t.disabled=e.disabled):t=e.cloneNode(!1),t.href=this.generateCacheBustUrl(this.linkHref(e));const o=e.parentNode;return o.lastChild===e?o.appendChild(t):o.insertBefore(t,e.nextSibling),this.waitUntilCssLoads(t,()=>{let o;return o=/AppleWebKit/.test(this.window.navigator.userAgent)?5:200,this.Timer.start(o,()=>{if(e.parentNode)return e.parentNode.removeChild(e),t.onreadystatechange=null,this.window.StyleFix?this.window.StyleFix.link(t):void 0})})}reattachImportedRule({rule:e,index:t,link:o}){const s=e.parentStyleSheet,i=this.generateCacheBustUrl(e.href),n=e.media.length?[].join.call(e.media,", "):"",r=`@import url("${i}") ${n};`;e.__LiveReload_newHref=i;const l=this.document.createElement("link");return l.rel="stylesheet",l.href=i,l.__LiveReload_pendingRemoval=!0,o.parentNode&&o.parentNode.insertBefore(l,o),this.Timer.start(this.importCacheWaitPeriod,()=>{if(l.parentNode&&l.parentNode.removeChild(l),e.__LiveReload_newHref===i)return s.insertRule(r,t),s.deleteRule(t+1),(e=s.cssRules[t]).__LiveReload_newHref=i,this.Timer.start(this.importCacheWaitPeriod,()=>{if(e.__LiveReload_newHref===i)return s.insertRule(r,t),s.deleteRule(t+1)})})}generateUniqueString(){return"livereload="+Date.now()}generateCacheBustUrl(e,t){const o=this.options||a;let i,n;if(t||(t=this.generateUniqueString()),({url:e,hash:i,params:n}=s(e)),o.overrideURL&&e.indexOf(o.serverURL)<0){const t=e;e=o.serverURL+o.overrideURL+"?url="+encodeURIComponent(e),this.console.log(`LiveReload is overriding source URL ${t} with ${e}`)}let r=n.replace(/(\?|&)livereload=(\d+)/,(e,o)=>`${o}${t}`);return r===n&&(r=0===n.length?"?"+t:`${n}&${t}`),e+r+i}}},{}],8:[function(e,t,o){const s=e("./customevents"),i=window.LiveReload=new(e("./livereload").LiveReload)(window);for(const e in window)e.match(/^LiveReloadPlugin/)&&i.addPlugin(window[e]);i.addPlugin(e("./less")),i.on("shutdown",()=>delete window.LiveReload),i.on("connect",()=>s.fire(document,"LiveReloadConnect")),i.on("disconnect",()=>s.fire(document,"LiveReloadDisconnect")),s.bind(document,"LiveReloadShutDown",()=>i.shutDown())},{"./customevents":2,"./less":3,"./livereload":4}],9:[function(e,t,o){class s{constructor(e){this.func=e,this.running=!1,this.id=null,this._handler=()=>(this.running=!1,this.id=null,this.func())}start(e){this.running&&clearTimeout(this.id),this.id=setTimeout(this._handler,e),this.running=!0}stop(){this.running&&(clearTimeout(this.id),this.running=!1,this.id=null)}}s.start=(e,t)=>setTimeout(t,e),o.Timer=s},{}]},{},[8]);
